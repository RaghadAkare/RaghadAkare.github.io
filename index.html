<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invest in Birzeit</title>

    <!-- ููุชุจุฉ Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <!-- ููุชุจุฉ Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <style>
        /* ุชุฎุตูุต ุญุฌู ุงูุฎุฑูุทุฉ */
        #map {
            height: 100vh;
        }

        /* ุตูุฏูู ุงูููุงุชุฑ */
        .filter-container {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <!-- ูุญุชูู ุงูุฎุฑูุทุฉ -->
    <div id="map"></div>

    <!-- ุตูุฏูู ุงูููุงุชุฑ -->
    <div class="filter-container" id="filter-container">
        <h5>ููุชุฑุฉ ุงูุฃุฑุงุถู</h5>
        <label>ุงููุณุงูุฉ ูู ุงููุฏุงุฑุณ (ูุชุฑ): <span id="schoolDistanceValue">400</span></label>
        <input type="range" id="schoolDistance" min="100" max="800" value="400">

        <label>ุงููุณุงูุฉ ูู ุงูุฎุฏูุงุช (ูุชุฑ): <span id="serviceDistanceValue">50</span></label>
        <input type="range" id="serviceDistance" min="0" max="100" value="50">

        <label>ููุน ุงูุดุงุฑุน:</label>
        <select id="roadType">
            <option value="main">ุดุงุฑุน ุฑุฆูุณู</option>
            <option value="secondary">ุดุงุฑุน ูุฑุนู</option>
        </select>

        <button class="btn btn-primary mt-2" id="applyFilters">ุชุทุจูู ุงูููุงุชุฑ</button>
    </div>

    <!-- ููุชุจุงุช JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <script>
        // ุฅุนุฏุงุฏ ุงูุฎุฑูุทุฉ
        const map = L.map('map').setView([31.9416, 35.1975], 13);

        // ุทุจูุฉ ุงูุฎุฑูุทุฉ ุงูุฃุณุงุณูุฉ
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // ุฏุงูุฉ ุชุญููู ุงูุทุจูุงุช
        const loadGeoJSON = (url, options = {}) => {
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const layer = L.geoJSON(data, options).addTo(map);
                    if (options.name) {
                        L.control.layers(null, { [options.name]: layer }).addTo(map);
                    }
                })
                .catch(error => console.error(`Error loading ${url}:`, error));
        };

        // 1. ุทุจูุฉ ุงูุฃุฑุงุถู
        loadGeoJSON('https://raghadakare.github.io/Birziet_Parcels.json', {
            style: {
                color: "black",
                fillColor: "beige",
                fillOpacity: 0.7
            },
            onEachFeature: (feature, layer) => {
                layer.bindPopup(`
                    <strong>ุฑูู ุงููุทุนุฉ:</strong> ${feature.properties.ParcelNumb}<br>
                    <strong>ุงููุณุงุญุฉ:</strong> ${feature.properties.Shape_Area} ูยฒ<br>
                    <strong>ุงูุณุนุฑ:</strong> โช${feature.properties.price}
                `);
            },
            name: 'ุงูุฃุฑุงุถู'
        });

        // 2. ุทุจูุฉ ุงููุฏุงุฑุณ
        loadGeoJSON('https://raghadakare.github.io/Birziet_Schools.json', {
            pointToLayer: (feature, latlng) => L.marker(latlng, { icon: L.divIcon({ html: "๐ซ", iconSize: [20, 20] }) }),
            onEachFeature: (feature, layer) => {
                layer.bindPopup(`<strong>ุงููุฏุฑุณุฉ:</strong> ${feature.properties.SchoolNa_1}`);
            },
            name: 'ุงููุฏุงุฑุณ'
        });

        // 3. ุทุจูุฉ ุงูุทุฑู
        loadGeoJSON('https://raghadakare.github.io/Birziet_Roads.json', {
            style: {
                color: "gray",
                weight: 2
            },
            name: 'ุงูุทุฑู'
        });

        // 4. ุทุจูุฉ ุงูุฎุฏูุงุช
        loadGeoJSON('https://raghadakare.github.io/Birziet_Facilities.json', {
            pointToLayer: (feature, latlng) => L.circleMarker(latlng, {
                radius: 5,
                fillColor: "green",
                color: "#000",
                weight: 1,
                fillOpacity: 0.8
            }),
            onEachFeature: (feature, layer) => {
                layer.bindPopup(`
                    <strong>ุงูุฎุฏูุฉ:</strong> ${feature.properties.Facility_E}<br>
                    <strong>ุงูุชุตููู:</strong> ${feature.properties.Category_E}
                `);
            },
            name: 'ุงูุฎุฏูุงุช'
        });

        // 5. ุทุจูุฉ ุงูููุจุงุช
        loadGeoJSON('https://raghadakare.github.io/Birziet_Dumping.json', {
            pointToLayer: (feature, latlng) => L.circleMarker(latlng, {
                radius: 5,
                fillColor: "red",
                color: "#000",
                weight: 1,
                fillOpacity: 0.8
            }),
            onEachFeature: (feature, layer) => {
                layer.bindPopup(`<strong>ุงูููุจ:</strong> ${feature.properties.SiteName_E}`);
            },
            name: 'ุงูููุจุงุช'
        });

        // 6. ุทุจูุฉ ุงููููุฉ ุงูุฒุฑุงุนูุฉ
        loadGeoJSON('https://raghadakare.github.io/Birziet_Agri.json', {
            style: {
                color: "yellow",
                fillColor: "#ffff99",
                fillOpacity: 0.6
            },
            name: 'ุงููููุฉ ุงูุฒุฑุงุนูุฉ'
        });

        // 7. ุทุจูุฉ ุชุตูููุงุช ุงูุฃุฑุงุถู
        loadGeoJSON('https://raghadakare.github.io/Birziet_ABC.json', {
            style: {
                color: "orange",
                fillColor: "#ffcc00",
                fillOpacity: 0.6
            },
            onEachFeature: (feature, layer) => {
                layer.bindPopup(`<strong>ุชุตููู ุงูุฃุฑุถ:</strong> ${feature.properties.Type}`);
            },
            name: 'ุชุตูููุงุช ุงูุฃุฑุงุถู'
        });

        // ุชุญุฏูุซ ุงูููู ุงูุธุงูุฑุฉ ุนูุฏ ุชุบููุฑ ูุทุงูุงุช ุงููุณุงูุฉ
        $('#schoolDistance').on('input', function () {
            $('#schoolDistanceValue').text($(this).val());
        });

        $('#serviceDistance').on('input', function () {
            $('#serviceDistanceValue').text($(this).val());
        });

        // ุชุทุจูู ุงูููุงุชุฑ
        $('#applyFilters').on('click', () => {
            const schoolDistance = $('#schoolDistance').val();
            const serviceDistance = $('#serviceDistance').val();
            const roadType = $('#roadType').val();

            alert(`ุชู ุชุทุจูู ุงูููุงุชุฑ:
            - ุงููุณุงูุฉ ูู ุงููุฏุงุฑุณ: ${schoolDistance} ูุชุฑ
            - ุงููุณุงูุฉ ูู ุงูุฎุฏูุงุช: ${serviceDistance} ูุชุฑ
            - ููุน ุงูุดุงุฑุน: ${roadType}`);
        });
    </script>
</body>
</html>
